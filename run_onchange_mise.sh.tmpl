#!/bin/bash

set -e

# This hash forces the script to run whenever mise config changes
# Mise config hash: {{ include "dot_config/mise/config.toml" | sha256sum }}

# Load Homebrew environment for this script execution
if [ -f "/opt/homebrew/bin/brew" ]; then
    eval "$(/opt/homebrew/bin/brew shellenv)"
elif [ -f "/usr/local/bin/brew" ]; then
    eval "$(/usr/local/bin/brew shellenv)"
fi

if ! command -v mise &> /dev/null; then
    echo "Mise is not installed on this system."
    exit 0
fi

echo "ğŸ› ï¸ Mise config changed. Installing/updating tools..."



# Update plugins and install tools defined in ~/.config/mise/config.toml
mise install -y

