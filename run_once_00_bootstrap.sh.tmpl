#!/bin/bash
set -e

# Install Brew for macos
{{ if eq .chezmoi.os "darwin" -}}
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
eval "$(/opt/homebrew/bin/brew shellenv)"
{{ end -}}

# Linux - install core tools since we're not using brew: Mise, starship prompt, git, curl, etc.
{{ if eq .chezmoi.os "linux" -}}
packages="curl git build-essential unzip"
sudo apt-get update
sudo apt-get install -y $packages
curl https://mise.run | sh
curl -sS https://starship.rs/install.sh | sh
{{ end -}}